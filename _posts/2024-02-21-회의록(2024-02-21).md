---
layout: single
title:  "🧑‍🤝‍🧑 회의록(2024-02-21)"
excerpt: "오프라인, 주제 신청서 작성"
categories: Meeting
# tag: [python, blog, food]
toc: true
toc_sticky: true
typora-root-url: ../
auto_profile: false
# sidebar:
#    nav: "docs"
# search: false
---

<br/>

**[활동 기록]**  
활동 기간 : 2024-02-21 (수) 13:00 ~ 2024-02-22 (목) 06:15  
활동 장소 : 인천대학교 이룸관 스터디룸 및 학산도서관  
참여자 : [정동교], 고명훈, 김성웅, 김우찬  
기록자 : [정동교] 
{: .notice--danger .text-center}

<br/>

---

# 1. 주제 신청서 작성

온라인 디스코드 회의가 시/공간적 이점은 있으나, 실제 오프라인에서 회의를 진행하는 것만큼 효율적으로 진행하기는 어려움. 따라서 신청서를 빠른 시일 내로 완성하기 위하여 인천대학교 이룸관 및 학산도서관에서 밤샘 회의를 실시함.

기존 제품의 특허를 다시 한 번 검토하며 기술적 Flow를 정확히 이해하고, 우리 팀이 차이점으로 잡고자 했던 다색상 원단에 대한 색상 유사도 검출 시스템의 기술적 기반을 다지고자 한다. 이를 바탕으로 H/W 설계 및 문제점 등을 보완하고자 함.

오늘까지 모든 내용을 완성하는 것은 현실적으로 어렵기 때문에, 주제 신청서의 목차를 결정하고 해당 내용을 바탕으로 목표치를 설정해 작성한다.

세부적인 내용까지 기록하지는 않을 예정이며, 주요하게 다룬 핵심 부분과 요약 내용, 결과를 중심으로 기록하고자 함.
{: .notice--success .text-center}

## 1) 주제 신청서 목차

> 팀원들과 논의를 거쳐 어떤 순서로 주제 신청서를 구성할지 정리하였다.

1. **배경 설명 및 문제 인식**

   - 현재 우리 팀에서 다루고자 하는 내용은 원단 산업이라는 다소 생소할 수 있는 분야를 다루기 때문에 기본적인 배경지식에 대한 설명이 필수적이라고 할 수 있음.

   - 따라서 원단 업계의 일반적인 산업 구조, 거래 방식, 원단의 특성, 색상 유사도 판별 과정에서 주관적 견해로 인해 발생하는 문제점 등을 보이고, 문제 해결의 필요성을 제시한다.

2. **전문가 인터뷰**

   - 기존에 진행한 전문가 인터뷰를 바탕으로 독자가 문제 상황을 정리하는데 도움을 주고, 문제 해결의 필요성에 타당성을 확보한다.

   - 또한 전문가 인터뷰를 통해 현 캡스턴 디자인에서 중요한 사항으로 고려되는 ‘범위’, ‘가치’, ‘핵심’을 간접적으로 제시한다.

3. **문제 상황의 가치 및 해결 범위**

   - 이전에 설명된 배경지식과 전문가 인터뷰를 통해 본 문제의 ‘가치’, ‘범위’를 직접적으로 강조하고, 문제의 핵심을 요약하여 설명한다.

   - ‘가치’의 경우, 문제 상황을 해결했을 때 어떤 이점을 얻을 수 있는지에 초점을 맞춘다.

   - ‘범위’의 경우, 문제의 배경에서 집중할 부분과 기술적 부분에서 집중할 부분을 명확히 제시한다.

   - ‘핵심’의 경우, 지금까지의 내용을 요약한다.

4. **유사 제품**

   - 기존 유사 제품인 Color Confirmation System의 기술적 핵심을 요약한다.

   - 해당 시스템이 갖는 기술적인 한계를 제시한다.

5. **기술적 해결 방안 및 차별점**

   - 이전에 제시된 유사 제품의 문제점을 바탕으로, 기존 제품과의 차별점을 제시한다.

   - 해당 차별점을 어떤 식으로 구현하고자 하는지 H/W적, S/W적 해결 방안을 제시한다.

   - H/W 설계에 대한 대략적인 스케치를 제시한다.

   - Flow Chart를 제시한다.

   - 개발 과정에서 발생할 수 있는 문제점을 예상하고, 해당 문제들을 해결할 수 있는 대안을 제시한다.

   - 본 내용을 주어진 기간 내에 충분히 개발할 수 있을지 현실 인식을 검토하여 정리한다.

6. **개발 계획 및 기자재**

   - 개발 계획을 수립하고 예상 Process를 정리한다.

   - 필요한 센서 및 각종 기자재를 선택하고, 해당 재료들을 선택한 이유와 가격을 정리한다.

금일 활동에서는 목차에서 (1) ~ (3)까지 대략적인 작성을 마치고자 하며,  
기술적 부분에 대해서 정확한 알고리즘 및 Flow를 논의하는 것을 목표로 설정하였다.
{: .notice--success .text-center}

<br>

---

## 2) 배경 설명 및 문제 인식, 전문가 인터뷰

가장 먼저, 글의 기반을 다져 줄 **배경 설명 및 문제 인식** 파트와 **전문가 인터뷰** 파트 작성을 시작하였음. 전문가 인터뷰는 기존의 실제 인터뷰 내용을 이해하기 쉽도록 재구성하면 끝났지만, 배경 설명 및 문제 인식 파트는 작성하는데 어려움이 존재했다. 그 이유는 우리가 기술적으로 어떻게 문제를 해결할 것인지 완전히 결정하지 못했기 때문이다. 따라서 작성을 대략적으로 마친 후, 먼저 기술에 대해서 논의를 마치기로 했다.

<br>

## 3) 기술에 대한 만담

유사 제품의 특허를 다시 한 번 읽어보고, 해당 제품을 기술적으로 완벽하게 이해한다. 그 뒤, 해당 제품의 기술적 한계점을 인식하고 이를 개선하는 방향으로 기술적 차별점을 마련한다.

<br>

### 조명과 색온도에 의한 물체의 원본 색 오차

물체의 실제 색은 물체를 비추는 광원의 색온도와 빛의 세기에 따라서 다르게 보일 수 있다. 특히 색온도는 물체의 색 자체를 변화시키기 때문에, 일반적으로 자연광과 유사하다고 평가되는 5000K ~ 6500K 이내의 조명을 사용해야만 한다. 이러한 환경에서 조명이 강할수록 물체가 밝아지기 때문에, 물체는 필연적으로 밝아지게 된다. 따라서 이러한 오차를 보정할 수 있는 방법을 마련해야 한다.

<br>

### 연색성(CRI, Color Rendering Index)

모든 조명은 연색성이라는 수치를 갖는다. 연색성이란, 조명이 어떠한 물체를 비췄을 때, 해당 물체가 원본 색과 얼마나 가까운 색을 띠는지를 자연광과 대비하여 수치화한 것을 말한다. 0~100 (Ra)사이의 값을 가지며, 100일 경우 자연광 수준의 색 재현도를 보인다는 뜻이다.

국제조명위원회에 따르면 80Ra 이상의 조명은 상대적으로 우수한 색 재현성을 보인다고 하나, 이는 어디까지나 상대적인 값이기 때문에 절대적으로 우수한 것은 아니다. 색이 중요한 업무를 수행하는 조명업계에서는, 적어도 90Ra 이상의 조명을 사용한다고 한다. 

<br>

따라서 우리는 색온도가 5000K ~ 6500K 사이이며, CRI가 적어도 80Ra 이상이고,  
물체를 밝히기에 적절한 세기의 조명을 찾아서 사용해야만 한다.
{: .notice--success .text-center}

<br>

### 현재 직면한 문제점

- 카메라의 한계와 노이즈로 인해 RGB 오차가 발생할 수 있다.

- 색온도가 자연광과 유사하다고 할 때, 물체의 원본 색이 실제보다 밝아질 수 있다.

> 따라서 이러한 문제를 해결하기 위해 보정을 수행하는 과정이 필요하다.  
> 이러한 문제를 해결하기 위하여 다양한 방안을 논의해보도록 하자.

<br>

### 오차에 대한 보정

- **환경적 요소 통제**

  > 오차에 대한 보정을 다루기 이전에, 현실을 인식하고 주어진 요건 속에서 환경을 최대한 통제해야 한다. 환경이 통제될 수록 우리가 신경 써야 할 변수가 줄어들기 때문에, 오차를 잡아내기가 더욱 편할 것이다.

  - 타겟 원단

    전문가 인터뷰에 따르면, 본격적인 원단 거래를 수행하기 이전에는 대체로 10cm * 10cm 크기의 **스와치**를 통해 사전 협의가 이루어진다. 따라서 우리도 전문가의 의견에 맞춰 10cm * 10cm 정도 크기의 원단을 대상으로 하는 것이 좋을 것이다.

    다만 추후에는 객체 인식 등을 사용하여 모든 크기에 대해서 활용할 수 있도록 시스템의 기능을 개선하는 방향으로도 생각해볼 수 있을 것이다.

    또한 주제 신청서에서는 스와치가 무엇인지 모르는 독자가 읽게 될 것이므로, 스와치에 대한 설명 및 각종 도메인 용어에 대한 상세한 설명이 포함되어야 한다.

    [@Standard Object를 이용한 길이 추정](https://yobbicorgi.tistory.com/39)
    {: .text-center}

<br>

- **조명 및 카메라에 의해 발생하는 원본 색상 오차에 대한 보정**
  - 조사해 본 결과, 모든 면적에 일정한 광량이 전달되도록 만들 수 있는 조명은 현재까지 존재하지 않음. 따라서 지역별 조도의 차이는 일부 존재할 수밖에 없다. 이러한 차이가 크지는 않을 것으로 생각되나, 아무리 미세한 차이라고 하더라도 물체의 색상에는 영향을 줄 수밖에 없다.
  - 따라서 두 원단 스와치의 색상 유사도를 도출하기 위해서 두 원단의 대표 색상을 추출할 때, 해당 원단의 지역적인 조도 차이를 최소화 하기 위하여 평균값을 도출해야 하며, 최대한 많이/고르게 평균값을 구해서 이러한 영향을 최소화 할 수 있어야 한다.
  - RED 카메라(*초정밀 카메라*)를 사용할 경우, 물체의 원본 색과 거의 동일한 색을 알아내는 것이 가능하지만, 현재 우리의 예산을 고려할 때 해당 카메라의 사용은 불가능하므로, 조명 및 카메라에 의한 오차를 보정할 수 있는 방법을 도입해야 한다.
  - 우리는 조명 및 카메라에 의한 오차를 보정하는 방법으로, RGB 값이 확보되어 있는 레퍼런스 원단 스와치 및 RGB 값이 확보된 3D 프린터 필라멘트를 활용한 보정 값의 생성을 도입한다. 수많은 방법을 논의해 보았으나, 가장 현실적이고 효과적일 것이라고 예상되는 방법은 본 방법이라고 생각된다.
  - 레퍼런스 원단 스와치의 경우, 팬톤에서 공개한 원단이 있으며, 필라멘트의 경우에도 RGB값이 공개되어 있으므로 해당 값들을 카메라로 촬영하여 발생하는 오차를 통해 보정값을 생성하는 방식이다. 즉, 해당 레퍼런스 오브젝트를 촬영하여 오차를 구하고, 이를 반복적으로 수행하여 평균 오차를 확보해 이를 보정값으로 사용하겠다는 의미이다.
  - 이러한 방식을 사용하기 위해서는 반드시 조명이 일정한 상황으로 통제가 되어야 하므로, 조도 센서를 통해 조명이 일정하게 가해지는 것을 확인할 수 있어야만 한다. 혹은 조도에 따라서 실시간으로 보정값을 조절할 수 있는 알고리즘을 설계해야 한다.
  - 그런데 만약 필라멘트를 사용하는 방식이 빛반사 등에 의해 실현되기 어렵다면, 필라멘트를 무광 필라멘트로 사용하고 반사가 발생하지 않도록 조명의 세기를 키우는 방식을 활용하겠음. (*조명이 박스 전체에 고르게 퍼져야 빛반사가 발생하지 않을 것*) 
  - 레퍼런스 원단의 경우에는 빛반사가 발생하지 않는 면 재질이므로, 크게 문제가 발생하지 않을 것으로 예상됨.

<br>

### 유사도 분석 및 다색상 원단에 대한 알고리즘 논의

- **기존 방식의 문제점**

  - 기존 방식은 원단을 촬영해 평균 색상을 뽑아내는 방식으로, 오직 대표 색상 하나만을 추출한다. 이 방식은 다색상 원단에 대해서는 색상 비교를 효과적으로 수행할 수 없기 때문에 개선의 여지가 존재한다.

    (다색상 원단의 대표적인 예시)
    {: .text-center}

    ![image-20240304211405855](/images/2024-02-21-회의록(2024-02-21)/image-20240304211405855.png){: .img-width-large}

<br>

- **개선된 알고리즘**

  - 이러한 문제를 해결하기 위해서 개선된 알고리즘을 도입할 수 있다. 바로 클러스터링이다. 3차원 공간 상에서 표현되는 RGB Pixel 값들을 바탕으로 클러스터링을 진행하고, 해당 클러스터를 하나의 색상 군집으로 간주한다. 해당 클러스터 내에서 지역별로 발생할 수 있는 색상 차이 및 조도 차이에 의한 색 차이를 고려하여 다양한 방식의 평균을 계산하고, 이를 바탕으로 최종 대표 색상을 도출하면 된다.

  - 클러스터링 방식으로는 대표적으로 DBSCAN을 활용할 수 있다. DBSCAN을 사용하면 밀도에 의한 클러스터링이 수행되므로, 적절한 hyperparameter 설정을 통해 색상 군집을 효과적으로 구분해 낼 수 있다.

  - 또한 클러스터 내에서 대표 색상을 추출하는데 활용할 수 있는 방안으로는 Sliding Window 등이 대표적이며, 군집 내에서 밀도가 가장 높은 지점으로부터의 거리 등을 가중하여 대표 색상을 구하는데 반영하는 방식으로도 사용할 수 있을 것이다.

  - 물론 중요한 것은, 이러한 과정은 모두 오차 보정이 이루어진 후에 수행되어야 한다는 것이다.

  - 또한, 기존의 방식은 Outlier를 골라내기 힘들다는 문제점도 존재한다. 물론 원단을 염색하는 과정 자체에서 눈에 띄는 Outlier가 나타나는 것은 매우 힘든 일이지만, 사람의 눈은 비슷한 색상이 연속되어 위치할 경우 이 것들이 하나의 색상이라고 인지하는 특성이 있기 때문에 Outlier를 잡아내지 못할 가능성도 배제할 수는 없다. 따라서 범용적인 알고리즘을 만들고자 한다면, DBSCAN 알고리즘의 사용이 Outlier를 찾아내는데 크게 기여할 수 있을 것이다.

  - 마지막으로, 다색상 원단에 대해서 여러 개의 대표 색상을 사용하여 유사도를 추출할 때, 해당 유사도는 각 대표 색상 군집의 면적에 가중해서 구하는 것이 합리적이다.

    또한, 이 알고리즘은 **정말 유사한 색상을 가진 원단이 아니라면 비교하는 것 자체가 불가능**하므로, 사용자 선에서 적절한 사용이 요구됨에 주의해야 한다.

<br>

- **핵심**

  - 레퍼런스 스와치 및 필라멘트를 활용한 색상 오차 보정
  - DBSCAN 클러스터링을 통한 다색상 군집 추출
    - Outlier 필터링 진행
  - 대표 색상 군집 별 대표 색상 추출
    - 슬라이딩 윈도우, 군집 중심으로부터의 거리 등을 가중치로 활용

  - 대표 색상 별 유사도 분석
    - 군집 면적을 가중치로 활용하여 비교

<br>

지금까지 얘기한 내용을 우리 기술의 핵심 부분으로 결정하고, 이를 바탕으로 다른 부분을 작성한다.
{: .notice--success .text-center}

<br>

## 4) H/W

- 라즈베리파이5
  - 어느 정도 성능이 좋은 보드가 필요함.
- 외형
  - RGB 값이 확보된 필라멘트를 사용하여 3D Printer를 통해 암막 박스 설계

- 조명
  - 최대한 균일한 빛이 가해질 수 있는 조명이 필요함.
  - 다음 요소들을 고려해야 함.
    - 조명의 세기
    - 조명의 각도
    - 색온도
    - 연색성

- 카메라
  - 물체를 정교하게 촬영할 수 있는 고화질 카메라가 필요함.
  - 다음 요소들을 고려해야 함.
    - 화질
    - 플리커 현상 방지


[@플리커 현상이란?](https://news.samsungdisplay.com/31451)
{: .text-center}

<br>

## 5) 역할분담

- H/W
  - 설계(3D Printing) 및 실험 환경 조성
  - 조도 및 광도의 constancy 체크
  - 카메라 및 조명의 정상 동작 확인
  - 라즈베리파이에서 모듈 동작 및 시스템 구동 코드 작성
- S/W
  - 조명 on, 카메라 촬영
  - 보정값 프로세싱
  - 클러스터링을 통한 대표색 추출
  - 대표색을 기반으로 한 평균(대표색상) 추출
  - 대표 색상에 대한 유사도 판별
  - Outlier에 대한 예외 처리

---

# 2. 추가 논의

## 추후 일정

- 정리된 기술적 핵심을 바탕으로 주제 신청서의 전반적인 내용을 작성할 수 있었음.
- 이후에는 지금까지 작성한 내용을 더욱 구체화하여 최대한 빨리 신청서를 제출하는 방향으로 진행.
- 2024-02-23 (금) 12:00에 온라인 디스코드에서 주제 신청서 추가 작성 실시

<br>

